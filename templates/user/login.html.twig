{% extends 'base.html.twig' %}
{% block title %}Connexion {% endblock %}
{% block body %}
{% if error %}
    <div>{{ error.messageKey|trans(error.messageData, 'security') }}</div>
{% endif %}

{% if is_granted('IS_AUTHENTICATED_FULLY') %}
<h1 class="text-center">Vous êtes déjà connecté</h1>
<h2><small>{{ app.user.username }}</small> Ce n'est pas vous ? <a href="{{ path('logout') }}">Se déconnecter</a></h2>
{% else %}
{% if last_username %}
<h1 class="text-center">Ravi de vous revoir</h1>
{% else %}
<h1 class="text-center">Se connecter</h1>
{% endif %}
<form action="{{ path('login') }}" method="post" class="col-lg-5 col-md-6 col-sm-7 col-xs-8 mx-auto pt-4">
    <div class="form-group">
        <label class="mb-0" for="username"><small>Adresse email</small></label>
        <input type="email" class="form-control" id="username" name="_username" aria-describedby="emailHelp" value="{{ last_username }}" placeholder="exemple@mail.fr">
    </div>
    <div class="form-group">
        <label class="mb-0" for="password"><small>Mot de passe</small></label>
        <input type="password" class="form-control" name="_password" id="password" placeholder="Mot de passe">
    </div>
    <div class="text-center pt-2">
        <input type="hidden" name="_target_path" value="/home" />
        <a href="#" class="btn btn-lg btn-danger"><span class="glyphicon glyphicon-user"></span>Se connecter</a>
    </div>
</form>

<hr class="col-4 mt-4 mb-3">
<p class="text-center">Vous n'avez pas de compte ? <a href="{{ path('register') }}">Inscription</a></p>
{% endif %}
{% endblock %}